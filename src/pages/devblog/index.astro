---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";
const posts = (await getCollection("devlog"))
  .filter(post => !post.data.draft)
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<BaseLayout title="Dev Log">
  <section class="devblog-index">
    <h1>Development Log</h1>

    {posts.map(post => (
      <article class="devlog-entry">
        <h2>
          <a href={`${import.meta.env.BASE_URL}devblog/${post.slug}`}>
            {post.data.title}
          </a>
        </h2>

        <div class="meta">
          <time datetime={post.data.date.toISOString()}>
            {post.data.date.toLocaleDateString()}
          </time>

          {post.data.tags && (
            <div class="tags">
              {post.data.tags.map(tag => (
                <span class="tag">{tag}</span>
              ))}
            </div>
          )}
        </div>

        {post.data.summary && (
          <p class="summary">{post.data.summary}</p>
        )}
      </article>
    ))}
  </section>
</BaseLayout>